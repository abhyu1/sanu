<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Song ğŸµ</title>

    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&display=swap" rel="stylesheet">
</head>

<body class="song-bg">


<nav class="navbar">
    <div class="nav-container">
        <a href="index.html" class="nav-logo">ğŸ’–</a>
        <ul class="nav-menu">
            <li><a href="index.html" class="nav-link">Will You?</a></li>
            <li><a href="love-letter.html" class="nav-link">Love Letter</a></li>
            <li><a href="photos.html" class="nav-link">Photos</a></li>
        </ul>
    </div>
</nav>

<!-- ğŸµ BACKGROUND MUSIC -->
<audio id="bgMusic" loop>
    <source src="music.mp3.mp3" type="audio/mpeg">
</audio>

<button id="musicToggle" class="music-toggle">ğŸ”Š</button>
    
<div class="page-content">
    <div class="song-container">
        <h1>Our Song ğŸ’•</h1>
        <p>This song feels like you</p>
        <img src="spotify-qr.jpg" class="spotify-qr">
        <p>Scan & listen together ğŸ¶</p>
    </div>

    <div class="page-links">
        <a href="love-letter.html" class="page-link">Love Letter</a>
        <a href="photos.html" class="back-btn">â† Back</a>
    </div>
</div>

<script>
const bgMusic = document.getElementById("bgMusic");
const toggleBtn = document.getElementById("musicToggle");

// Restore saved state
const savedState = localStorage.getItem("musicState") || "on";
bgMusic.volume = 0.4;
bgMusic.muted = savedState === "off";
toggleBtn.textContent = bgMusic.muted ? "ğŸ”‡" : "ğŸ”Š";

// Auto play if already allowed
if (localStorage.getItem("musicAllowed") === "yes") {
    bgMusic.play().catch(() => {});
}

// Unlock music on first interaction
function unlockMusic() {
    bgMusic.play().then(() => {
        localStorage.setItem("musicAllowed", "yes");
    }).catch(() => {});
    document.removeEventListener("click", unlockMusic);
}
document.addEventListener("click", unlockMusic);

// Toggle mute/unmute
toggleBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    bgMusic.muted = !bgMusic.muted;

    if (bgMusic.muted) {
        toggleBtn.textContent = "ğŸ”‡";
        localStorage.setItem("musicState", "off");
    } else {
        toggleBtn.textContent = "ğŸ”Š";
        localStorage.setItem("musicState", "on");
        bgMusic.play().catch(() => {});
    }
});
</script>

</body>
</html>
